<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>HTML Validator</title>
    <script src="https://cdn.jsdelivr.net/gh/htmlhint/brackets-htmlhint@master/htmlhint/htmlhint.js"></script>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; display: flex; flex-direction: column; align-items: center; }
        .container { display: flex; width: 90%; }
        .lineNumbers { text-align: right; padding-right: 10px; color: gray; font-family: monospace; }
        textarea { width: 100%; height: 200px; font-family: monospace; font-size: 14px; border: 1px solid #ccc; }
        button { margin-top: 10px; padding: 8px 16px; font-size: 16px; cursor: pointer; }
        .success { color: green; margin-top: 10px; }
        .error { color: red; margin-top: 10px; }
        .warning { color: orange; }
    </style>
</head>
<body>

<h1>HTML Validator with Line Numbers</h1>

<div class="container">
    <pre class="lineNumbers" id="lineNumbers"></pre>
    <textarea id="htmlInput" oninput="updateLineNumbers()"><p>Hello world</p></textarea>
</div>
<br>
<button id="validateBtn">Validate HTML</button>
<div id="validationResults"></div>

<script>
    function validateHTML() {
        const output = document.getElementById("validationResults");
        const textarea = document.getElementById("htmlInput");
        output.innerHTML = "";
        textarea.style.border = "1px solid #ccc"; // Reset border

        if (typeof HTMLHint === "undefined") {
            output.innerHTML = '<div class="warning">Error: HTMLHint did not load.</div>';
            return;
        }

        const html = textarea.value;
        const results = HTMLHint.verify(html);

        if (results.length === 0) {
            output.innerHTML = '<div class="success">No HTML errors found!</div>';
            textarea.style.border = "2px solid green"; // Highlight success
        } else {
            textarea.style.border = "2px solid red"; // Highlight errors
            results.forEach(error => {
                const div = document.createElement("div");
                div.className = 'error';
                div.textContent = `Line ${error.line}, Col ${error.col}: ${error.message}`;
                output.appendChild(div);
            });
        }
    }

    function updateLineNumbers() {
        const textarea = document.getElementById("htmlInput");
        const lineNumbers = document.getElementById("lineNumbers");
        const lines = textarea.value.split("\n").length;
        lineNumbers.innerHTML = Array.from({ length: lines }, (_, i) => `${i + 1}`).join("\n");
    }

    document.addEventListener("DOMContentLoaded", () => {
        document.getElementById("validateBtn").addEventListener("click", validateHTML);
        document.getElementById("htmlInput").addEventListener("input", validateHTML);
        updateLineNumbers(); // Initialize line numbers
    });
</script>

</body>
</html>
